FROM openzwave/openzwave-control-panel:latest
ADD file:6f877549795f4798a38b318c0f63f6646dbf10d3c249c7f4b73cc7cfe42dc0f5 in /
LABEL org.label-schema.schema-version=1.0 org.label-schema.name=CentOS Base Image org.label-schema.vendor=CentOS org.label-schema.license=GPLv2 org.label-schema.build-date=20181205
CMD ["/bin/bash"]
MAINTAINER Justin Hammond
WORKDIR /etc/yum.repos.d/
RUN /bin/sh -c yum install wget -y \
    && wget http://mirror.my-ho.st/Downloads/OpenZWave%3A/Devel/CentOS_CentOS-7/OpenZWave%3ADevel.repo
RUN /bin/sh -c yum update -y \
    && yum groupinstall 'Development Tools' -y \
    && yum install libmicrohttpd-devel libopenzwave-devel gnutls-devel systemd-devel -y
RUN /bin/sh -c adduser ozwcp_user
RUN /bin/sh -c usermod -a -G dialout ozwcp_user
RUN /bin/sh -c usermod -a -G games ozwcp_user
USER [ozwcp_user]
ENV HOME=/home/ozwcp_user
WORKDIR /home/ozwcp_user
RUN /bin/sh -c git clone https://github.com/OpenZWave/open-zwave-control-panel.git
WORKDIR /home/ozwcp_user/open-zwave-control-panel
COPY file:02b64af08e69aa8b360e9e4b20e2adcbaeb18b90fbe9057ba0b83e6f57a5f97a in /home/ozwcp_user/open-zwave-control-panel/
ADD tarsum.v1+sha256:f55d95a4b8b1be15a0f8a3be4f3c85616af7b608973bf6440688e280d8cfedd8 in /home/ozwcp_user/open-zwave-control-panel/
ADD tarsum.v1+sha256:c462fea93bf96276fc3976678c85e52a3afed08f222a0fb7e85c530bc18102c6 in /home/ozwcp_user/open-zwave-control-panel/
USER [root]
RUN /bin/sh -c chown ozwcp_user $HOME/open-zwave-control-panel/tiny*
USER [ozwcp_user]
RUN /bin/sh -c make
USER [root]
RUN /bin/sh -c yum grouperase 'Development Tools' -y
RUN /bin/sh -c yum erase libmicrohttpd-devel libopenzwave-devel systemd-container-devel -y
USER [ozwcp_user]
EXPOSE 8008/tcp
ENTRYPOINT ["/home/ozwcp_user/open-zwave-control-panel/ozwcp" "-p 8008"]
